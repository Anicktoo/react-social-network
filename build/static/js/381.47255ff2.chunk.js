"use strict";(self.webpackChunksocial_network_react=self.webpackChunksocial_network_react||[]).push([[381],{3381:(e,s,n)=>{n.r(s),n.d(s,{default:()=>S});var r=n(5043),a=n(3003),t=n(3923),o=n(8878),l=n(2099);const i=e=>e.users.users,c=((0,l.Mz)(i,(e=>e.filter((e=>e.followed)))),e=>e.users.pageSize),g=e=>e.users.totalUsersCount,d=e=>e.users.currentPage,u=e=>e.users.isFetching;var p=n(6968);var h=n(579);const m=(0,p.G)({"page-container":"Paginator_page-container__qHGT5","page-item":"Paginator_page-item__aJBA7",blocked:"Paginator_blocked__Y-PjL","current-page":"Paginator_current-page__vgrKG"}),_=e=>{let{onPageChange:s}=e;return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("div",{className:m(["page-item"]),onClick:()=>{s(1)},children:"1"}),(0,h.jsx)("div",{className:m(["page-item","blocked"]),children:"..."})]})},x=e=>{let{onPageChange:s,pagesCount:n}=e;return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("div",{className:m(["page-item","blocked"]),children:"..."}),(0,h.jsx)("div",{className:m(["page-item"]),onClick:()=>{s(n)},children:n})]})},j=e=>{let{onPageChange:s,currentPage:n,pages:r}=e;return r.map((e=>{const r=n===e?"current-page":"";return(0,h.jsx)("div",{className:m(["page-item",r]),onClick:()=>{s(e)},children:e})}))},C=e=>{let{onPageChange:s,currentPage:n,totalUsersCount:a,pageSize:t}=e;const{pagesCount:o,pages:l,startGap:i,endGap:c}=(0,r.useMemo)((()=>((e,s,n,r)=>{const a=s,t=Math.ceil(n/r);let{startInd:o,endInd:l}=((e,s,n)=>{if(n<=e)return{startInd:1,endInd:n};const r=Math.floor(e/2);return s-1<=r?{startInd:1,endInd:e}:n-s<=r?{startInd:n-e,endInd:n}:{startInd:s-r,endInd:s+r}})(e,a,t);const i=1!==o,c=l!==t;i&&(o+=2),c&&(l-=2);const g=[];for(let d=o;d<=l;d++)g.push(d);return{pagesCount:t,pages:g,startGap:i,endGap:c}})(11,n,a,t)),[n,a,t]);return(0,h.jsxs)("div",{className:m(["page-container"]),children:[i&&(0,h.jsx)(_,{onPageChange:s}),(0,h.jsx)(j,{onPageChange:s,currentPage:n,pages:l}),c&&(0,h.jsx)(x,{onPageChange:s,pagesCount:o})]})},P={users:"Users_users__t9o+n",usersContainer:"Users_usersContainer__Trm1s",usersList:"Users_usersList__q+g8Q",header:"Users_header__EAz0k"};var f=n(5475),v=n(7893),w=n(6497);const k="UserItem_userItem__HVEsT",N="UserItem_imgContainer__YrPw5",U="UserItem_infoContainer__NBrkg",I="UserItem_userName__D2xvk",F=e=>{let{id:s,isFetching:n,photos:r,fullName:a,followed:t,status:o,name:l,isFollowingInProgress:i,follow:c,unfollow:g}=e;const d="/profile/"+s;return(0,h.jsxs)("div",{className:k,children:[(0,h.jsx)("div",{className:N,children:n?(0,h.jsx)(w.A,{}):(0,h.jsx)(f.k2,{to:d,children:(0,h.jsx)("img",{src:null!=r.small?r.small:v.A,alt:a+"'s avatar"})})}),(0,h.jsx)("div",{className:U,children:n?(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(w.A,{content:"#".repeat(20)}),(0,h.jsx)(w.A,{content:"#".repeat(10)}),(0,h.jsx)(w.A,{content:"follow"})]}):(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(f.k2,{to:d,children:(0,h.jsx)("span",{className:I,children:l})}),(0,h.jsx)("span",{children:o}),t?(0,h.jsx)("button",{disabled:i,onClick:()=>{g(s)},className:"inlineButton",children:"Unfollow"}):(0,h.jsx)("button",{disabled:i,onClick:()=>{c(s)},className:"inlineButton",children:"Follow"})]})})]})},b=(0,p.G)(P),z=e=>{let{onPageChange:s,currentPage:n,totalUsersCount:r,pageSize:a,users:t,isFetching:o,follow:l,unfollow:i}=e;return(0,h.jsx)("main",{className:P.users,children:(0,h.jsxs)("div",{className:b(["usersContainer","stdBlock"]),children:[(0,h.jsxs)("header",{className:P.header,children:[(0,h.jsx)("span",{children:"All Users"}),(0,h.jsx)(C,{onPageChange:s,currentPage:n,totalUsersCount:r,pageSize:a})]}),(0,h.jsx)("div",{className:P.usersList,children:t.map((e=>(0,h.jsx)(F,{...e,isFetching:o,follow:l,unfollow:i},e.id)))})]})})};class A extends r.Component{componentDidMount(){this.props.getUsers(this.props.pageSize,this.props.currentPage)}onPageChange(e){this.props.getUsers(this.props.pageSize,e)}render(){return(0,h.jsx)(z,{totalUsersCount:this.props.totalUsersCount,currentPage:this.props.currentPage,pageSize:this.props.pageSize,users:this.props.users,isFetching:this.props.isFetching,onPageChange:this.onPageChange.bind(this),follow:this.props.follow,unfollow:this.props.unfollow})}}const S=(0,t.Zz)((0,a.Ng)((e=>({users:i(e),pageSize:c(e),totalUsersCount:g(e),currentPage:d(e),isFetching:u(e)})),{follow:o.e6,unfollow:o.X2,getUsers:o.lo}))(A)},6497:(e,s,n)=>{n.d(s,{A:()=>o});var r=n(6968);var a=n(579);const t=(0,r.G)({preloader:"Preloader_preloader__br+S7","gradient-move":"Preloader_gradient-move__QAPAx"}),o=e=>{let{content:s,styles:n,classes:r,...o}=e;return(0,a.jsx)("div",{style:n,className:t(["preloader"].concat(r)),children:s})}}}]);
//# sourceMappingURL=381.47255ff2.chunk.js.map